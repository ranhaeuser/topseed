extends  ../../_part/_baseShell

block head
	title CompCom
	include ../../_part/_header

block main
	.mui-container-fluid
	button#but1  But1 

	script.
		TS.onAppReady(UIinit)
		
		let _blx
		
		function UIinit() {
			console.log('pg')
			_blx = new BLX(null) 

			//create observer in 3 steps; and in our case register w/ event bus/registry
			// in init of BLX
			var obs = flyd.stream() //make new stream
			_blx.regObserver('t', obs)

			// create listener function to handdle the event
			// in BLX
			//ff is optional when using short versions below
			var handl = _blx.observer('t')
			flyd.on(function(data) { console.log(data) }, handl)
			
			//short version
			//var func = function(data){console.log(data)}
			//_blx.on('t', func)

			// dispatch event in view, page or comp
			$('#but1').on('click', function(ce){ // ce is the clicked event, what got clicked
				//console.log('clicked', ce)
				var data = 'get form data or anything'
				var disp = _blx.observer('t')
				disp(data) //emit
			})

			//short version
			//$('#but1').on('click', function(ce){
			//	var data = 'get form data or anything'
			//	_blx.emit('t', data)
			//})	

		}


block footer
	include ../../_part/_footer

